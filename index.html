<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Wetterbot by phucdev</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Wetterbot</h1>
      <h2 class="project-tagline">Interprets questions about weather in natural language and (hopefully) delivers adequate information about the weather. </h2>
      <a href="https://github.com/phucdev/weatherbot" class="btn">View on GitHub</a>
      <a href="https://github.com/phucdev/weatherbot/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/phucdev/weatherbot/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="wetterbot" class="anchor" href="#wetterbot" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Wetterbot</h1>

<p>Interprets questions about the weather in natural language and (hopefully) delivers adequate information about the weather. 
This is a group project that I'll be doing for the course "Einführung in die maschinelle Sprachverarbeitung mit Python". 
In the initial phase it will only work with German input. 
The rest of the readme.md will be in German.</p>

<h2>
<a id="einführung" class="anchor" href="#einf%C3%BChrung" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Einführung</h2>

<p>Das Projekt soll Wetterabfragen in natürlicher Sprache bearbeiten und adäquate Antworten liefern.<br>
Beispiele für Fragen sind: </p>

<ul>
<li>Regnet es?</li>
<li>Wie warm ist es in Berlin?</li>
<li>Wie ist das Wetter am Dienstag?</li>
<li>Ist es morgen sonnig?</li>
</ul>

<p>User-Abfragen, die nichts mit dem Wetter zu tun haben, sollten auch behandelt werden können.</p>

<h2>
<a id="python-module-apis-und-andere-hilfsmittel" class="anchor" href="#python-module-apis-und-andere-hilfsmittel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Python Module, APIs und andere Hilfsmittel</h2>

<h5>
<a id="ntlk" class="anchor" href="#ntlk" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NTLK</h5>

<p>Im Kurs wurde viel mit dem Natural Language Toolkit (<a href="http://www.nltk.org/">http://www.nltk.org/</a>) gearbeitet. Deshalb wird es auch für dieses Projekt verwendet.
Das Python-Modul kann man ganz einfach mit diesem Befehl installieren:<br> 
<code>python3 -m pip install nltk</code></p>

<h5>
<a id="openweatherapi-pyowm-ipinfo-requests" class="anchor" href="#openweatherapi-pyowm-ipinfo-requests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>OpenWeatherAPI, pyowm, ipinfo, requests</h5>

<p>Für das Projekt wird die OpenWeatherMAP API benutzt. Für einen API Key muss man sich dort registrieren. Es gibt einen kostenlosen Plan. 
Als Hilfsmittel wird das Python-Modul “pyowm” verwendet.</p>

<ul>
<li>
<a href="https://pyowm.readthedocs.io/en/latest/">https://pyowm.readthedocs.io/en/latest/</a> <br>
</li>
</ul>

<p>Konkret interessant werden wohl diese Teile der Dokumentation sein:</p>

<ul>
<li><a href="https://pyowm.readthedocs.io/en/latest/pyowm.webapi25.html#module-pyowm.webapi25.observation">https://pyowm.readthedocs.io/en/latest/pyowm.webapi25.html#module-pyowm.webapi25.observation</a></li>
<li><a href="https://pyowm.readthedocs.io/en/latest/pyowm.utils.html">https://pyowm.readthedocs.io/en/latest/pyowm.utils.html</a></li>
</ul>

<p>Das Python-Modul kann man ganz einfach mit diesem Befehl installieren: <br>
<code>python3 -m pip install pyowm</code></p>

<p>Ein Anfang wäre:</p>

<pre><code>import pyowm
# API Key
owm = pyowm.OWM('hier API einfügen')
observation = owm.weather_at_place("Berlin,de")
w = observation.get_weather()
# Temperatur
print(w.get_temperature('celsius')['temp'])
</code></pre>

<p>Das Ding gibt die momentane Temperatur in Berlin aus. Das Skript owmtest.py ist noch ein wenig ausführlicher und zeigt weitere Funktionalitäten von pyowm.</p>

<p>Falls der User keinen Ort angibt, lässt sich mittels der IP Geolocation API der Ort des Users anhand seiner IP Adresse bestimmen.</p>

<ul>
<li>
<a href="http://ipinfo.io/developers">http://ipinfo.io/developers</a> </li>
</ul>

<p>Dazu benötigt man das Python-Modul "requests": <br> 
<code>python3 -m pip install requests</code></p>

<p>Das hier gibt die Stadt aus.</p>

<pre><code>import requests
r = requests.get('http://ipinfo.io/city')
print(r.text)
</code></pre>

<h5>
<a id="telegram-bot-api" class="anchor" href="#telegram-bot-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Telegram Bot API</h5>

<p>Das Ziel ist, das Projekt in Form eines Telegram Bots zu realisieren.
Die Telegram Bot API: <a href="https://core.telegram.org/bots">https://core.telegram.org/bots</a></p>

<p>Mockup als Telegram-Bot
<img src="https://raw.githubusercontent.com/phucdev/weatherbot/master/iOS%20Mockup.png" alt="Wetterbot Mockup"></p>

<h4>
<a id="stanfordnertagger" class="anchor" href="#stanfordnertagger" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>StanfordNERTagger</h4>

<p>Um den Ort aus dem User-Input zu identifizieren, wird der StanfordNERTagger (Named Entity Recognizer) verwendet.</p>

<ul>
<li><a href="http://nlp.stanford.edu/software/CRF-NER.shtml">http://nlp.stanford.edu/software/CRF-NER.shtml</a></li>
<li><a href="http://www.nltk.org/api/nltk.tag.html#module-nltk.tag.stanford">http://www.nltk.org/api/nltk.tag.html#module-nltk.tag.stanford</a></li>
</ul>

<p>Orte werden mit 'LOCATION' getaggt. 
Momentan gibt es folgende Probleme: </p>

<ul>
<li>Man muss sich den StanfordNERTagger installieren und sich die Models (zum Training) herunterladen. Der StanfordNERTagger funktioniert deshalb nur lokal auf dem (bzw. meinem) Computer.</li>
<li>Da ich noch nicht herausbekommen habe, wie man den StanfordNERTagger auf deutschen Input umstellt, verwende ich ein englisches Model. Damit kann der StanfordNERTagger aber auch die Orte identifizieren.</li>
</ul>

<h2>
<a id="struktur-des-projekts-und-zentrale-probleme" class="anchor" href="#struktur-des-projekts-und-zentrale-probleme" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Struktur des Projekts und zentrale Probleme</h2>

<h3>
<a id="struktur" class="anchor" href="#struktur" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Struktur</h3>

<h5>
<a id="wetterbotpy" class="anchor" href="#wetterbotpy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>wetterbot.py</h5>

<p>Dieses Skript sollte die ganze Anbindung an die Telegram Bot API (Interaktion mit der API und dem User) bzw. die ganze Steuerung übernehmen.</p>

<h5>
<a id="extractorpy" class="anchor" href="#extractorpy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>extractor.py</h5>

<p>Dieses Skript sollte den Input verarbeiten und an weather.py schicken. Bei Fragen, wo der Ort nicht spezifiziert wird, sollte nachgefragt werden oder wenn es geht, dann sollte der Ort automatisch durch Geo-Location bestimmt werden. Diesen soll der Bot bzw. das Programm sich für darauf folgende Fragen merken.</p>

<h5>
<a id="weatherpy" class="anchor" href="#weatherpy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>weather.py</h5>

<p>Die Anbindung an die Wetter API ist nicht schwer, weil das Python Modul OWM die meiste Arbeit für uns erledigt. Also an die Wetterdaten ranzukommen ist relativ einfach.
Das Python Skript weather.py übernimmt da die ganze Arbeit. Alle weiteren Wetter-Funktionen sollten dort reingeschrieben werden.</p>

<p>Im Wesentlichen gibt es drei Variablen:</p>

<ul>
<li>place → Ort</li>
<li>time → Zeit </li>
<li>query → Typ von Abfrage (Wetter, Temperatur, sunny?, rainy?, random)<br>
</li>
</ul>

<h3>
<a id="probleme" class="anchor" href="#probleme" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Probleme</h3>

<p>Das Schwierigste ist tatsächlich die Verarbeitung des Inputs (extractor.py).</p>

<ul>
<li>Ort erkennen</li>
<li>Zeit erkennen</li>
<li>Art der Wetterabfrage erkennen</li>
<li>ungültigen Input behandeln</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/phucdev/weatherbot">Wetterbot</a> is maintained by <a href="https://github.com/phucdev">phucdev</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
